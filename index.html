<script>
        document.addEventListener('DOMContentLoaded', function() {
            // Function to generate the essay
            document.getElementById('generate-btn').addEventListener('click', function() {
                const getVal = (id) => document.getElementById(id).value;

                // Introduction Paragraph
                const intro = [
                    getVal('p1-1'),
                    getVal('p1-2'),
                    getVal('p1-3')
                ].filter(Boolean).join(' ');

                // Body Paragraph 1
                const body1 = [
                    getVal('p2-1'), getVal('p2-2'), getVal('p2-3'), getVal('p2-4'), getVal('p2-5'),
                    getVal('p2-6'), getVal('p2-7'), getVal('p2-8'), getVal('p2-9'), getVal('p2-10'),
                    getVal('p2-11'), getVal('p2-12'), getVal('p2-13'), getVal('p2-14'), getVal('p2-15')
                ].filter(Boolean).join(' ');

                // Body Paragraph 2
                const body2 = [
                    getVal('p3-1'), getVal('p3-2'), getVal('p3-3'), getVal('p3-4'), getVal('p3-5'),
                    getVal('p3-6'), getVal('p3-7'), getVal('p3-8'), getVal('p3-9'), getVal('p3-10'),
                    getVal('p3-11'), getVal('p3-12'), getVal('p3-13'), getVal('p3-14')
                ].filter(Boolean).join(' ');

                // Body Paragraph 3
                const body3 = [
                    getVal('p4-1'), getVal('p4-2'), getVal('p4-3'), getVal('p4-4'), getVal('p4-5'),
                    getVal('p4-6'), getVal('p4-7'), getVal('p4-8'), getVal('p4-9'), getVal('p4-10'),
                    getVal('p4-11')
                ].filter(Boolean).join(' ');

                // Conclusion Paragraph
                const conclusion = [
                    getVal('p5-1'),
                    getVal('p5-2'),
                    getVal('p5-3')
                ].filter(Boolean).join(' ');

                let essayText = '';

                if (intro) {
                    essayText += 'Introduction\n' + intro + '\n\n';
                }
                if (body1) {
                    essayText += 'Body Paragraph 1\n' + body1 + '\n\n';
                }
                if (body2) {
                    essayText += 'Body Paragraph 2\n' + body2 + '\n\n';
                }
                if (body3) {
                    essayText += 'Body Paragraph 3\n' + body3 + '\n\n';
                }
                if (conclusion) {
                    essayText += 'Conclusion\n' + conclusion;
                }

                const essayOutput = document.getElementById('essay-output');
                document.getElementById('essay-text').textContent = essayText;
                essayOutput.classList.add('show');
                essayOutput.scrollIntoView({ behavior: 'smooth' });
            });

            // Function for the accordion
            const accordionHeaders = document.querySelectorAll('.accordion-header');

            accordionHeaders.forEach(header => {
                header.addEventListener('click', () => {
                    const accordionItem = header.parentElement;
                    const content = accordionItem.querySelector('.accordion-content');
                    const arrow = header.querySelector('.accordion-arrow');

                    if (content.style.maxHeight) {
                        content.style.maxHeight = null;
                        arrow.classList.remove('open');
                    } else {
                        content.style.maxHeight = content.scrollHeight + 'px';
                        arrow.classList.add('open');
                    }
                });
            });
        });
    </script>
